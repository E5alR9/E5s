-- [[ ğŸŒŒ å¤©æ–‡å…‰è­œ 117.0 - 15,000 çƒ / 500-800ç¢¼æ©«å‘æµæ˜Ÿ / 100 FPS / Tab ç¸®é€² ]]
	local Lighting = game:GetService("Lighting")
	local RunService = game:GetService("RunService")
	local p = game:GetService("Players").LocalPlayer
	local v117Tag = "Universe_Spectra_V117"

	-- ã€1. ç’°å¢ƒç®¡ç†ã€‘
	local existing = workspace:FindFirstChild(v117Tag)
	if existing then
		_G.v117Active = false; existing:Destroy()
		if _G.EnvBackupV117 then
			Lighting.ClockTime, Lighting.Brightness, Lighting.OutdoorAmbient = _G.EnvBackupV117.T, _G.EnvBackupV117.B, _G.EnvBackupV117.O
		end
		return 
	end

	_G.EnvBackupV117 = {T = Lighting.ClockTime, B = Lighting.Brightness, O = Lighting.OutdoorAmbient}
	_G.v117Active = true
	local currentSession = tick()
	_G.v117Session = currentSession

	Lighting.ClockTime, Lighting.Brightness, Lighting.OutdoorAmbient = 0, 0, Color3.new(0,0,0)
	local container = Instance.new("Model", workspace)
	container.Name = v117Tag

	-- ã€2. æ ¸å¿ƒè®Šé‡ã€‘
	local stars = {}
	local targetTotalStars = 15000 
	local currentTotalCount = 0
	local fps = 144
	local lastMeteorTime = 0
	local isStorming = false
	local nextStormTick = tick() + 30 

	-- ã€3. çœŸå¯¦æ©«å‘æµæ˜Ÿç”Ÿæˆ (é«˜åº¦: 500-800)ã€‘
	local function spawnHorizontalMeteor(rp, customColor)
		local meteor = Instance.new("Part", container)
		meteor.Shape, meteor.Size, meteor.Material = Enum.PartType.Ball, Vector3.new(2.5, 2.5, 2.5), Enum.Material.Neon
		meteor.Color, meteor.Anchored, meteor.CanCollide = Color3.new(1,1,1), true, false
		
		local att0 = Instance.new("Attachment", meteor)
		local att1 = Instance.new("Attachment", meteor)
		att1.Position = Vector3.new(0, 0, 18) -- å¼·åŒ–ä½ç©ºæ éçš„æ‹–å°¾æ„Ÿ
		
		local trail = Instance.new("Trail", meteor)
		trail.Attachment0, trail.Attachment1 = att0, att1
		trail.Color = ColorSequence.new(customColor or Color3.fromRGB(255, 255, 255), Color3.fromRGB(180, 230, 255))
		trail.Lifetime, trail.Transparency = 0.4, NumberSequence.new(0, 1)

		-- ã€ç‰©ç†è»Œè·¡ï¼š500-800 ç¢¼ä½ç©ºæ©«å‘ã€‘
		local height = math.random(500, 800) 
		local angle = math.rad(math.random(360)) 
		local distance = 3000 -- å»¶é•·é£›è¡Œè·¯å¾‘ç¢ºä¿æ©«è·¨æ•´å€‹å¤©éš›
		
		local startOffset = Vector3.new(math.cos(angle) * -distance, height, math.sin(angle) * -distance)
		local endOffset = Vector3.new(math.cos(angle) * distance, height + math.random(-30, 30), math.sin(angle) * distance)
		
		local startPos = rp + startOffset
		local endPos = rp + endOffset
		
		task.spawn(function()
			local alpha = 0
			-- ç¨å¾®å¢åŠ é€Ÿåº¦ä»¥è£œå„Ÿæ›´è¿‘çš„è¦–è¦ºè·é›¢
			local speed = 0.025 + (math.random() * 0.015) 
			while alpha < 1 and _G.v117Active do
				alpha = alpha + speed
				meteor.Position = startPos:Lerp(endPos, alpha)
				RunService.RenderStepped:Wait()
			end
			meteor:Destroy()
		end)
	end

	-- ã€4. æ˜Ÿçƒç”Ÿæˆå‡½æ•¸ã€‘
	local function createStar()
		local radius = math.random(600, 1800)
		local phi = math.rad(math.random(360))
		local theta = math.acos(2 * math.random() - 1)
		local rand = math.random()
		local size, color
		if rand > 0.95 then size = 4.5+math.random()*3; color = Color3.fromRGB(180,220,255)
		elseif rand > 0.7 then size = 2.5+math.random()*2; color = Color3.fromRGB(255,255,230)
		else size = 1.2+math.random()*1; color = Color3.fromRGB(255,120,60) end
		
		local s = Instance.new("Part", container)
		s.Shape, s.Anchored, s.CanCollide, s.Material = Enum.PartType.Ball, true, false, Enum.Material.Neon
		s.Size = Vector3.new(size, size, size); s.Color = color
		currentTotalCount = currentTotalCount + 1
		return {Obj = s, Radius = radius, Phi = phi, Theta = theta, Speed = (math.random()>0.5 and 1 or -1)*(math.random(15, 50)*0.00001)}
	end

	-- ã€5. æ ¸å¿ƒæ¸²æŸ“èˆ‡èª¿åº¦å¾ªç’°ã€‘
	task.spawn(function()
		for i = 1, 1000 do table.insert(stars, createStar()) end

		while _G.v117Active and _G.v117Session == currentSession do
			local dt = RunService.RenderStepped:Wait()
			fps = 0.9 * fps + 0.1 * (1 / dt)
			local char = p.Character and p.Character:FindFirstChild("HumanoidRootPart")
			if not char then continue end
			local rp = char.Position

			-- æµæ˜Ÿé›¨å¾ªç’°é‚è¼¯
			local now = tick()
			if now > nextStormTick then
				isStorming = true
				if now > nextStormTick + 10 then 
					isStorming = false
					nextStormTick = now + math.random(80, 150)
				end
			end

			if isStorming then
				if math.random() > 0.80 then spawnHorizontalMeteor(rp, Color3.fromRGB(220, 255, 255)) end
			else
				if now - lastMeteorTime > math.random(12, 25) then
					spawnHorizontalMeteor(rp); lastMeteorTime = now
				end
			end

			-- 100 FPS å®ˆè­·é‚è¼¯
			if fps < 100 and #stars > 100 then
				for k = 1, 30 do
					local s = table.remove(stars, math.random(#stars))
					if s then s.Obj:Destroy() end
					currentTotalCount = currentTotalCount - 1
				end
			elseif fps > 112 and currentTotalCount < targetTotalStars then
				for k = 1, 25 do
					if currentTotalCount < targetTotalStars then table.insert(stars, createStar()) end
				end
			end

			-- æ˜Ÿçƒæ—‹è½‰é‹ç®—
			for i = #stars, 1, -1 do
				local s = stars[i]
				s.Phi = s.Phi + s.Speed
				local starPos = rp + Vector3.new(s.Radius * math.sin(s.Theta) * math.cos(s.Phi), s.Radius * math.cos(s.Theta), s.Radius * math.sin(s.Theta) * math.sin(s.Phi))
				s.Obj.Position = starPos
				s.Obj.Transparency = (starPos.Y < rp.Y - 5) and 1 or 0
			end
		end
	end)
