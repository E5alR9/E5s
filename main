-- [[ ğŸ“¥ æ ¸å¿ƒè² è¼‰éƒ¨ç½²å€ (ç‰¹æ®Šç¬¦è™Ÿè£é£¾) ]] --
-- [[ â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•— ]] --
-- [[ â•‘  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•—     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—   â•‘ ]] --
-- [[ â•‘  â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—  â•‘ ]] --
-- [[ â•‘  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘  â•‘ ]] --
-- [[ â•‘  â–ˆâ–ˆâ•”â•â•â•  â•šâ•â•â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•— â•šâ•â•â•â–ˆâ–ˆâ•‘  â•‘ ]] --
-- [[ â•‘  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•  â•‘ ]] --
-- [[ â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• ]] --

-- [[ ğŸ“¥ æ ¸å¿ƒè®Šæ•¸åˆå§‹åŒ– ]]
_G.fKN = _G.fKN or "PageDown"           
_G.freezeMS = _G.freezeMS or 300      
_G.isMinimized = _G.isMinimized or false 
_G.toggleKey = _G.toggleKey or Enum.KeyCode.T
_G.switchInterval = _G.switchInterval or 0.08
_G.sensitivity = _G.sensitivity or 0.087
_G.bhop = false
_G.freeze = false

local p = game:GetService("Players").LocalPlayer
local UIS = game:GetService("UserInputService")
local SG = game:GetService("StarterGui")
local VIM = game:GetService("VirtualInputManager")
local RS = game:GetService("RunService")
local VU = game:GetService("VirtualUser")
local Cam = workspace.CurrentCamera
local DC_CODE = "XF4PTA5Pgp"
local DC_URL = "https://discord.gg/" .. DC_CODE
local BG_IMAGE_ID = "rbxassetid://117164248667049"
local Players = game:GetService("Players")
local lp = Players.LocalPlayer

-- [[ ğŸ”” ç³»çµ±é€šçŸ¥å°è£ ]]
local function notify(title, text, duration)
    pcall(function()
        SG:SetCore("SendNotification", {
            Title = title or "SYSTEM",
            Text = text or "",
            Duration = duration or 2,
            Icon = "rbxassetid://6023426926"
        })
    end)
end

-- [[ âŒ¨ï¸ AD (Spin) é‚è¼¯è®Šæ•¸ ]]
local activeAD = false
_G.switchInterval = _G.switchInterval or 0.08
local pressDuration = 0.000000001 
_G.sensitivity = _G.sensitivity or 0.087
local lastCameraAngle = select(2, Cam.CFrame:ToOrientation())

-- 1. å®šç¾©æ™ºèƒ½é‡ç½®å‡½æ•¸ (å·²ä¿®å¾©æ‰‹å‹•è¡çªå•é¡Œ)
local function forceReset()
    activeAD = false
    
    -- æª¢æŸ¥ï¼šåªæœ‰ç•¶ç©å®¶ã€Œæ‰‹å‹•æ²’æŒ‰è‘—ã€A æ™‚ï¼Œæ‰ç™¼é€æ”¾é–‹æŒ‡ä»¤
    if not UIS:IsKeyDown(Enum.KeyCode.A) then
        VIM:SendKeyEvent(false, Enum.KeyCode.A, false, game)
    end
    
    -- æª¢æŸ¥ï¼šåªæœ‰ç•¶ç©å®¶ã€Œæ‰‹å‹•æ²’æŒ‰è‘—ã€D æ™‚ï¼Œæ‰ç™¼é€æ”¾é–‹æŒ‡ä»¤
    if not UIS:IsKeyDown(Enum.KeyCode.D) then
        VIM:SendKeyEvent(false, Enum.KeyCode.D, false, game)
    end
    
    print("\\\\ SYSTEM \\\\ [[ SPIN_DEACTIVATED - MANUAL_PRESERVED ]]")
end

-- [[ ğŸš€ æ¨™é ­è¼¸å‡ºï¼šANSI 3D ç«‹é«”æ–œé«” ]]
local function showHeader()
    local wall = "///////////////////////////////////////////////////////////////////////////////////"
    local floor = "\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\"
    print("\n" .. wall)
    print([[										
  ________  ________  ________  ___       ________   _______
 |\   ____\|\   ____\|\   __  \|\  \     |\   __  \|\   __  \
 \ \  \___|\ \  \____| \  \|\  \ \  \    \ \  \|\  \ \  \|\  \
  \ \  \___\\ \_____  \ \   __  \ \  \    \ \  _____\ \_____  \
   \ \  \__|_\| _____\ \ \  \ \  \ \  \____\ \  \\_ \_|_____\  \
    \ \_______\ \_______\ \__\ \__\ \_______\ \__\ \ _\\\_______\
     \|_______|\|_______|\|__|\|__|\|_______|\|__|\|__|\|_______|
    ]])
    print(floor)
    print("|||| \\\\ //// @@@@ [ SYSTEM_OVERRIDE_INITIATED ] @@@@ //// \\\\ ||||")
    print("|||| OPERATOR : @E5alR9          |||| SECURITY : LEVEL_MAX     ||||")
    print("|||| STATUS   : OVERCLOCKED      |||| KERNEL   : STABLE        ||||")
    print(floor)
    print(wall .. "\n")
end
showHeader()

-- [[ ğŸ› ï¸ æ¨¡çµ„ä¸€ï¼šè³‡æºéƒ¨ç½² - é›™é‡è©¢å•ç‰ˆ ]]
task.spawn(function()
    print("//// #### [M1] DATA_DEPLOYMENT_START #### ////")
    _G.emoteSwaps = { { current = "APose", needed = "Broom" } }
    
    local function dl(u) 
        task.spawn(function() 
            print("\\\\\\\\ HTTP \\\\\\\\ <REQUESTING_REMOTE_PAYLOAD> ...")
            local s, e = pcall(function() loadstring(game:HttpGet(u))() end) 
            if s then print("|||| SUCCESS |||| %%% Payload_Injected_Successfully") 
            else print("|||| ERROR |||| !!! Failure: " .. tostring(e)) end
        end) 
    end
    dl("https://api.luarmor.net/files/v3/loaders/36d5417f898691cb6c6d347b077e01e2.lua")

    local S = game:GetService("ReplicatedStorage"):WaitForChild("Items")
    
    local function dup(folder, old, new) 
        local i = folder:FindFirstChild(old) 
        if i then 
            print("//// CLONE //// " .. old .. " ===>>> " .. new)
            i:Clone().Parent = folder i.Name = new 
        end 
    end

    -- [[ ğŸ”” è©¢å• 1: Rockin ]]
    local rockinBind = Instance.new("BindableFunction")
    rockinBind.OnInvoke = function(answer)
        if answer == "NO" then
            dup(S.Emotes, "RockinStride", "Stride")
        else
            print("|||| CHOICE: YES |||| Skipping RockinStride")
        end
    end

    -- [[ ğŸ”” è©¢å• 2: Broom ]]
    local broomBind = Instance.new("BindableFunction")
    broomBind.OnInvoke = function(answer)
        if answer == "NO" then
            dup(S.Emotes, "Broom", "SnowmobileCruise")
        else
            print("|||| CHOICE: YES |||| Skipping Broom")
        end
    end

    -- åŸ·è¡Œé€šçŸ¥
    pcall(function()
        game:GetService("StarterGui"):SetCore("SendNotification", {
            Title = "SYSTEM CHECK";
            Text = "do u have Rockin?";
            Duration = 99999;
            Button1 = "YES";
            Button2 = "NO";
            Callback = rockinBind;
        })
        
        task.wait(2) -- ç¨å¾®å»¶é²é¿å…é€šçŸ¥æ‰“æ¶
        
        game:GetService("StarterGui"):SetCore("SendNotification", {
            Title = "SYSTEM CHECK";
            Text = "do u have Broom?";
            Duration = 99999;
            Button1 = "YES";
            Button2 = "NO";
            Callback = broomBind;
        })
    end)

    -- ç„¡è«–å¦‚ä½•éƒ½åŸ·è¡Œçš„éƒ¨åˆ† (Cosmetics)
    pcall(function()
        dup(S.Cosmetics, "ToxicInferno", "BorealisAurora")
    end)

    -- é˜²æ›æ©Ÿç³»çµ± (ä¿æŒåŸæ¨£)
    p.Idled:Connect(function() 
        VU:CaptureController() 
        VU:ClickButton2(Vector2.zero) 
        print("//// PULSE //// Activity_Heartbeat_Sent")
    end)
end)

-- [[ âš™ï¸ æ¨¡çµ„äºŒï¼šå¼•æ“åŒæ­¥ ]]
task.spawn(function()
    task.wait(1.5) 
    print("\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\ [ ENGINE_SYNCHRONIZATION ] ////////////////////")
    if #game.Players:GetPlayers() == 1 then
        print("\\\\ CHECK \\\\ Solo_Mode_Active...")
        local E = game:GetService("ReplicatedStorage"):WaitForChild("Items"):WaitForChild("Emotes")
        local s, r, b = E:FindFirstChild("Stride"), E:FindFirstChild("RockinStride"), E:FindFirstChild("Broom")
        
        if s and r and b then
            print("\\\\ SYNC \\\\ Overwriting_Classic_Modules...")
            local bm, rm = b:FindFirstChild("EmoteModuleClassic"), r:FindFirstChild("EmoteModuleClassic")
            if bm and rm then
                local nm = bm:Clone()
                nm:ClearAllChildren()
                for _, o in ipairs(rm:GetChildren()) do o:Clone().Parent = nm end
                rm:Destroy()
                nm.Name, nm.Parent = "EmoteModuleClassic", r
            end
            s:ClearAllChildren()
            for _, i in ipairs(r:GetChildren()) do i:Clone().Parent = s end
            print("\\\\ DONE \\\\ Deep_Integrity_Check_Pass")
        end
    end
end)

-- [[ ğŸ› ï¸ åŠŸèƒ½ï¼šFREEZE Tool (ä¿®æ­£ç§»å‹•ç‰ˆ + ç³»çµ±é€šçŸ¥) ]]
local function createFreezeToolWindow()
    if p.PlayerGui:FindFirstChild("FreezeTool_Floating") then 
        p.PlayerGui.FreezeTool_Floating:Destroy() 
    end

    local freezeSg = Instance.new("ScreenGui")
    freezeSg.Name = "FreezeTool_Floating"
    freezeSg.DisplayOrder = 2000 
    freezeSg.ResetOnSpawn = false
    freezeSg.Parent = p.PlayerGui
    
    local COLOR_NORMAL = Color3.fromRGB(70, 90, 110)
    local COLOR_DRAG = Color3.fromRGB(100, 200, 150)
    local COLOR_CLOSE = Color3.fromRGB(50, 60, 70)

    local function makeAdvancedTransform(gui)
        gui.Active = true -- é—œéµï¼šå¿…é ˆè¨­ç‚º Active æ‰èƒ½ç©©å®šæ¥æ”¶è¼¸å…¥
        local dragging, dragStart, startPos = false, nil, nil
        local canMove, moved = false, false
        local holdTime = 0.3 -- ç¸®çŸ­é•·æŒ‰æ™‚é–“ï¼Œ0.3ç§’å³å¯æ‹–å‹•
        local touchPoints = {}
        local startSize = gui.Size
        local startDistance = 0

        gui.InputBegan:Connect(function(input)
            if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
                dragging, moved, canMove = true, false, false
                dragStart, startPos = input.Position, gui.Position
                
                if input.UserInputType == Enum.UserInputType.Touch then touchPoints[input.Identifier] = input.Position end
                
                task.spawn(function()
                    local s = os.clock()
                    while dragging do
                        if os.clock() - s >= holdTime then
                            canMove = true
                            gui.BorderColor3 = COLOR_DRAG
                            break
                        end
                        task.wait(0.05)
                    end
                end)
            end
        end)

        -- ä½¿ç”¨ UserInputService ç›£è½å…¨å±€ç§»å‹•ï¼Œé˜²æ­¢æ»‘å¤ªå¿«è„«é›¢æŒ‰éˆ•
        local inputChangedConn
        inputChangedConn = game:GetService("UserInputService").InputChanged:Connect(function(input)
            if not dragging then return end
            
            if canMove and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
                local delta = input.Position - dragStart
                if delta.Magnitude > 3 then moved = true end
                gui.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
            end
            
            -- ç¸®æ”¾é‚è¼¯
            if input.UserInputType == Enum.UserInputType.Touch then
                touchPoints[input.Identifier] = input.Position
                local pts = {}
                for _, pos in pairs(touchPoints) do table.insert(pts, pos) end
                if #pts == 2 then
                    moved = true
                    local dist = (pts[1] - pts[2]).Magnitude
                    if startDistance == 0 then
                        startDistance, startSize = dist, gui.Size
                    else
                        local ratio = dist / startDistance
                        gui.Size = UDim2.new(0, math.clamp(startSize.X.Offset * ratio, 50, 400), 0, math.clamp(startSize.Y.Offset * ratio, 25, 200))
                    end
                end
            end
        end)

        gui.InputEnded:Connect(function(input)
            if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
                dragging, canMove, startDistance = false, false, 0
                gui.BorderColor3 = Color3.new(0, 0, 0)
                if input.UserInputType == Enum.UserInputType.Touch then touchPoints[input.Identifier] = nil end
            end
        end)
        
        return function() return moved end
    end

    -- FREEZE ä¸»æŒ‰éˆ•
    local fBtn = Instance.new("TextButton", freezeSg)
    fBtn.Size, fBtn.Position, fBtn.BackgroundColor3 = UDim2.new(0, 100, 0, 50), UDim2.new(0.5, -110, 0.8, 0), COLOR_NORMAL
    fBtn.Text, fBtn.TextColor3, fBtn.Font, fBtn.TextSize = "FREEZE", Color3.new(1, 1, 1), Enum.Font.GothamBold, 16
    fBtn.BorderSizePixel = 2
    fBtn.ZIndex = 2001
    Instance.new("UICorner", fBtn)
    local isMovedF = makeAdvancedTransform(fBtn)

    -- CLOSE é—œé–‰æŒ‰éˆ•
    local cBtn = Instance.new("TextButton", freezeSg)
    cBtn.Size, cBtn.Position, cBtn.BackgroundColor3 = UDim2.new(0, 80, 0, 40), UDim2.new(0.5, 10, 0.8, 0), COLOR_CLOSE
    cBtn.Text, cBtn.TextColor3 = "CLOSE", Color3.new(0.8, 0.8, 0.8)
    cBtn.ZIndex = 2001
    Instance.new("UICorner", cBtn)
    local isMovedC = makeAdvancedTransform(cBtn)

    -- æ ¸å¿ƒé»æ“Šäº‹ä»¶
    fBtn.MouseButton1Click:Connect(function()
        if isMovedF() then return end 
        
        game:GetService("StarterGui"):SetCore("SendNotification", { 
            Title = "SYSTEM"; 
            Text = "Freeze: " .. tostring(_G.freezeMS or 300) .. "ms"; 
            Duration = 0.5;
            Icon = "rbxassetid://6023426926"
        })

        fBtn.BackgroundColor3 = Color3.fromRGB(200, 50, 50)
        local t = os.clock()
        local delayTime = (tonumber(_G.freezeMS) or 300) / 1000
        while os.clock() - t < delayTime do end
        fBtn.BackgroundColor3 = COLOR_NORMAL
    end)

    cBtn.MouseButton1Click:Connect(function() 
        if not isMovedC() then freezeSg:Destroy() end 
    end)
end


-- [[ ğŸ–¥ï¸ ä»‹é¢è™•ç†æ ¸å¿ƒ - å®Œå…¨æ•´åˆç‰ˆ ]]
local function createUI()
    if p.PlayerGui:FindFirstChild("E5_Console") then p.PlayerGui.E5_Console:Destroy() end
    local sg = Instance.new("ScreenGui", p.PlayerGui)
    sg.Name, sg.ResetOnSpawn, sg.DisplayOrder = "E5_Console", false, 999
    
    local m = Instance.new("Frame", sg)
    m.Size = _G.isMinimized and UDim2.new(0, 100, 0, 30) or UDim2.new(0, 400, 0, 430)
    m.Position = UDim2.new(0, 210, 0, -40)
    m.BackgroundColor3, m.BackgroundTransparency, m.BorderSizePixel = Color3.new(0,0,0), 1, 1
    m.Active, m.Draggable = true, true

    local bg = Instance.new("ImageLabel", m)
    bg.Size, bg.Image, bg.ScaleType = UDim2.new(1, 0, 1, 0), BG_IMAGE_ID, Enum.ScaleType.Stretch
    bg.BackgroundTransparency, bg.Visible = 1, not _G.isMinimized

    local bar = Instance.new("Frame", m)
    bar.Size, bar.BackgroundColor3, bar.ZIndex = UDim2.new(1, 0, 0, 30), Color3.new(0.05, 0.05, 0.05), 5
    
    local xBtn = Instance.new("TextButton", bar)
    xBtn.Size, xBtn.Position, xBtn.Text = UDim2.new(0, 30, 0, 30), UDim2.new(1, -30, 0, 0), "X"
    xBtn.TextColor3, xBtn.BackgroundTransparency, xBtn.ZIndex, xBtn.TextSize = Color3.new(1, 0.2, 0.2), 1, 6, 18
    xBtn.MouseButton1Click:Connect(function() sg:Destroy() end)

    local minBtn = Instance.new("TextButton", bar)
    minBtn.Size, minBtn.Position, minBtn.Text = UDim2.new(0, 30, 0, 30), UDim2.new(1, -60, 0, 0), _G.isMinimized and "+" or "-"
    minBtn.TextColor3, minBtn.BackgroundTransparency, minBtn.ZIndex, minBtn.TextSize = Color3.new(1, 1, 1), 1, 6, 18

    local content = Instance.new("Frame", m)
    content.Size = UDim2.new(1, 0, 0, 150)
    content.Position = UDim2.new(0, 0, 1, -160)
    content.BackgroundTransparency, content.Visible = 1, not _G.isMinimized 

-- ç¬¬ä¸€æ’ï¼šLAG TOOL | KEY | SPD | SNS
local lagToolBtn = Instance.new("TextButton", content)
    lagToolBtn.Size, lagToolBtn.Position, lagToolBtn.Text = UDim2.new(0.35, 0, 0, 40), UDim2.new(0.02, 0, 0, 0), "TOOL"
    lagToolBtn.BackgroundColor3, lagToolBtn.TextColor3, lagToolBtn.BackgroundTransparency = Color3.fromRGB(70, 90, 110), Color3.new(1, 1, 1), 0.5
    Instance.new("UICorner", lagToolBtn)
    lagToolBtn.MouseButton1Click:Connect(function()
        createFreezeToolWindow()
        pcall(function() loadstring(game:HttpGet("https://raw.githubusercontent.com/E5alR9/E5s/refs/heads/main/spin"))() end)
        notify("TOOL", "Freeze Window & Spin Loaded!")
    end)

local spinKeyBtn = Instance.new("TextButton", content)
spinKeyBtn.Size, spinKeyBtn.Position = UDim2.new(0.18, 0, 0, 40), UDim2.new(0.38, 0, 0, 0)
spinKeyBtn.Text = "K:".._G.toggleKey.Name
spinKeyBtn.BackgroundColor3, spinKeyBtn.TextColor3, spinKeyBtn.BackgroundTransparency = Color3.new(0,0,0), Color3.new(1,1,1), 0.7
spinKeyBtn.MouseButton1Click:Connect(function()
    spinKeyBtn.Text = "..."
    local con; con = UIS.InputBegan:Connect(function(i)
        if i.UserInputType == Enum.UserInputType.Keyboard then
            _G.toggleKey = i.KeyCode
            spinKeyBtn.Text = "K:".._G.toggleKey.Name
            notify("KEYBIND", "Spin Key: ".._G.toggleKey.Name)
            con:Disconnect()
        end
    end)
end)

local spdBox = Instance.new("TextBox", content)
spdBox.Size, spdBox.Position, spdBox.Text = UDim2.new(0.18, 0, 0, 40), UDim2.new(0.58, 0, 0, 0), tostring(_G.switchInterval)
spdBox.BackgroundColor3, spdBox.TextColor3, spdBox.BackgroundTransparency = Color3.new(0,0,0), Color3.new(1,1,0), 0.7
spdBox.FocusLost:Connect(function()
    _G.switchInterval = tonumber(spdBox.Text) or 0.08
    notify("SPD", "Interval: ".._G.switchInterval)
end)

-- é€™è£¡æ˜¯é‡é»ï¼šè®“ UI èƒ½ä¿®æ”¹ _G.sensitivity
local sensBox = Instance.new("TextBox", content)
sensBox.Size, sensBox.Position, sensBox.Text = UDim2.new(0.18, 0, 0, 40), UDim2.new(0.78, 0, 0, 0), tostring(_G.sensitivity)
sensBox.BackgroundColor3, sensBox.TextColor3, sensBox.BackgroundTransparency = Color3.new(0,0,0), Color3.new(0,1,1), 0.7
sensBox.FocusLost:Connect(function()
    local val = tonumber(sensBox.Text)
    if val then 
        _G.sensitivity = val
        notify("SENS", "Sensitivity: ".._G.sensitivity)
    end
end)

    -- ç¬¬äºŒæ’ï¼šPGDN (fKN) | MS
    local l = Instance.new("TextButton", content)
    l.Size, l.Position, l.Text = UDim2.new(0.42, 0, 0, 40), UDim2.new(0.05, 0, 0, 50), _G.fKN
    l.BackgroundColor3, l.TextColor3, l.BackgroundTransparency = Color3.new(0,0,0), Color3.new(1,1,1), 0.7
    l.MouseButton1Click:Connect(function()
        l.Text = "..."
        local con; con = UIS.InputBegan:Connect(function(i) 
            if i.UserInputType == Enum.UserInputType.Keyboard then 
                _G.fKN = i.KeyCode.Name; l.Text = _G.fKN; con:Disconnect() 
                notify("SYSTEM", "Freeze Key: " .. _G.fKN)
            end 
        end)
    end)

    local tb = Instance.new("TextBox", content)
    tb.Size, tb.Position, tb.Text = UDim2.new(0.42, 0, 0, 40), UDim2.new(0.53, 0, 0, 50), tostring(_G.freezeMS)
    tb.BackgroundColor3, tb.TextColor3, tb.BackgroundTransparency = Color3.new(0,0,0), Color3.new(1,1,0), 0.7
    tb.FocusLost:Connect(function()
        local val = tonumber(tb.Text)
        if val then _G.freezeMS = val; notify("SYSTEM", "MS: " .. _G.freezeMS) end
    end)

    -- ç¬¬ä¸‰æ’ï¼šSETFFLAG
    local fBtn = Instance.new("TextButton", content)
    fBtn.Size, fBtn.Position, fBtn.Text = UDim2.new(0.42, 0, 0, 40), UDim2.new(0.05, 0, 0, 100), "DisplayFPS(RE)"
    fBtn.BackgroundColor3, fBtn.TextColor3, fBtn.BackgroundTransparency = Color3.new(0,0,0), Color3.new(0,1,1), 0.7
    fBtn.MouseButton1Click:Connect(function()
        pcall(function() setfflag("DebugDisplayFPS", "true") end)
        game:GetService("TeleportService"):Teleport(game.PlaceId, p)
    end)

    local sBtn = Instance.new("TextButton", content)
    sBtn.Size, sBtn.Position, sBtn.Text = UDim2.new(0.42, 0, 0, 40), UDim2.new(0.53, 0, 0, 100), "Missedworld(RE)"
    sBtn.BackgroundColor3, sBtn.TextColor3, sBtn.BackgroundTransparency = Color3.new(0,0,0), Color3.new(0,1,0), 0.7
    sBtn.MouseButton1Click:Connect(function()
        pcall(function() setfflag("MaxMissedWorldStepsRemembered", "2147483467") end)
        game:GetService("TeleportService"):Teleport(game.PlaceId, p)
    end)

    minBtn.MouseButton1Click:Connect(function()
        _G.isMinimized = not _G.isMinimized
        m.Size = _G.isMinimized and UDim2.new(0, 100, 0, 30) or UDim2.new(0, 400, 0, 430)
        bg.Visible, content.Visible = not _G.isMinimized, not _G.isMinimized
        minBtn.Text = _G.isMinimized and "+" or "-"
    end)
end

-- [[ å•Ÿå‹•åŸ·è¡Œæµç¨‹ ]]
createUI()

-- [[ ğŸ”„ è§’è‰²è™•ç†ï¼šç¢ºä¿é‡ç”Ÿå¾Œç„¡é ­èˆ‡æ–·è…³æŒçºŒç”Ÿæ•ˆ ]]
local function run(c)
    if not c then return end
    
    -- 1. è™•ç† UI æ§åˆ¶å° (å¦‚æœæ˜¯æœ¬åœ°ç©å®¶è‡ªå·±)
    local charPlayer = Players:GetPlayerFromCharacter(c)
    if charPlayer == lp then
        task.spawn(function()
            local gui = lp:WaitForChild("PlayerGui", 10)
            -- é€™è£¡å»ºè­°å¢åŠ æª¢æŸ¥ E5_Console æ˜¯å¦å­˜åœ¨çš„é‚è¼¯
            local console = gui:WaitForChild("E5_Console", 5)
            if console then 
                console.Enabled = true 
            end
        end)
    end

    -- 2. å¤–è§€è™•ç†ï¼šç„¡é ­èˆ‡æ–·è…³ (Korblox)
    task.spawn(function()
        -- ç­‰å¾…é ­éƒ¨åŠ è¼‰ï¼Œæœ€é•·ç­‰å¾… 10 ç§’
        local h = c:WaitForChild("Head", 10)
        if h then 
            task.wait(0.2) -- ç¨å¾®å»¶é•·ç­‰å¾…ï¼Œç¢ºä¿æ‰€æœ‰è£é£¾å“åŠ è¼‰å®Œç•¢
            
            -- é€æ˜åŒ–é ­éƒ¨
            h.Transparency = 1 
            
            -- åŸ·è¡Œé ç«¯æ–·è…³è…³æœ¬
            pcall(function()
                loadstring(game:HttpGet("https://raw.githubusercontent.com/E5alR9/E5s/refs/heads/main/bestkorblox"))()
            end)
            
            -- é€æ˜åŒ–æ‰€æœ‰é¢éƒ¨è²¼åœ– (Faces, Decals)
            for _, v in ipairs(h:GetChildren()) do 
                if v:IsA("Decal") or v:IsA("Texture") then 
                    v.Transparency = 1 
                end 
            end 
        end
    end)
end

-- [[ ğŸš€ è§’è‰²ç›£æ§ç³»çµ± (å…¨æœé©ç”¨) ]]
local function monitor(plr)
    -- ç›£è½è©²ç©å®¶æœªä¾†æ¯ä¸€æ¬¡çš„é‡ç”Ÿ (CharacterAdded)
    plr.CharacterAdded:Connect(function(char)
        run(char)
    end)
    
    -- å¦‚æœè©²ç©å®¶ç›®å‰å·²ç¶“åœ¨å ´ä¸Šï¼Œç«‹å³åŸ·è¡Œä¸€æ¬¡
    if plr.Character then 
        task.spawn(run, plr.Character) 
    end
end

-- [[ ğŸ ç³»çµ±å•Ÿå‹•æµç¨‹ ]]
task.spawn(function()
    print("//// #### [M3] GLOBAL_SYSTEM_RUNNING #### ////")

    -- 1. é‡å°ç›®å‰ä¼ºæœå™¨ä¸­å·²å­˜åœ¨çš„ç©å®¶å•Ÿå‹•ç›£æ§
    for _, plr in ipairs(Players:GetPlayers()) do
        monitor(plr)
    end
    
    -- 2. é‡å°å¾ŒçºŒæ‰åŠ å…¥ä¼ºæœå™¨çš„ç©å®¶å•Ÿå‹•ç›£æ§
    Players.PlayerAdded:Connect(monitor)
end)

-- [[ âŒ¨ï¸ è¼¸å…¥åµæ¸¬æ ¸å¿ƒï¼šå•Ÿå‹•èˆ‡åœæ­¢ (æ™ºèƒ½é‡ç½®ç‰ˆ) ]]

-- 1. åµæ¸¬æŒ‰ä¸‹
UIS.InputBegan:Connect(function(i, processed)
    if processed then return end 
    
    if i.KeyCode == Enum.KeyCode.Space then 
        _G.bhop = true 
    elseif i.KeyCode.Name == _G.fKN then 
        _G.freeze = true 
    elseif i.KeyCode == _G.toggleKey then 
        activeAD = true
        print("\\\\ SYSTEM \\\\ [[ SPIN_ACTIVATED ]]")
    end 
end)

-- 2. åµæ¸¬æ”¾é–‹ (åŒ…å«æ™ºèƒ½é‡ç½®æª¢æŸ¥)
UIS.InputEnded:Connect(function(i) 
    if i.KeyCode == Enum.KeyCode.Space then 
        _G.bhop = false 
    elseif i.KeyCode.Name == _G.fKN then 
        _G.freeze = false 
    elseif i.KeyCode == _G.toggleKey then 
        -- å‘¼å«æ™ºèƒ½é‡ç½®ï¼Œæœƒåˆ¤æ–·ä½ æ˜¯å¦æŒ‰è‘— AD
        forceReset()
    end 
end)

-- 3. å¼·åˆ¶ä¿éšªçµ² (æ¯ 0.5 ç§’åŒæ­¥ç‹€æ…‹)
task.spawn(function()
    while true do
        -- å¦‚æœé–‹é—œè®Šæ•¸æ˜¯é–‹å•Ÿçš„ï¼Œä½†å¯¦é«”æŒ‰éµæ²’è¢«æŒ‰ä¸‹ï¼ŒåŸ·è¡Œæ™ºèƒ½é‡ç½®
        if activeAD and not UIS:IsKeyDown(_G.toggleKey) then
            forceReset()
        end
        task.wait(0.5)
    end
end)

-- 2. ç‰©ç†å¾ªç’°ï¼šè™•ç† Bhop èˆ‡ Freeze
RS.Heartbeat:Connect(function()
    local c = p.Character
    local r = c and c:FindFirstChild("HumanoidRootPart")
    local hum = c and c:FindFirstChildOfClass("Humanoid")

    -- [[ Bhop é‚è¼¯ ]]
    if _G.bhop and hum and hum.FloorMaterial ~= Enum.Material.Air then 
        hum:ChangeState(3) 
    end

    -- [[ Freeze æ ¸å¿ƒ (å°„ç·šè§¸ç™¼ç‰ˆ) ]]
    if _G.freeze and r then
        local lp = RaycastParams.new()
        lp.FilterDescendantsInstances = {c}
        
        -- åˆ¤å®šï¼šè…³ä¸‹ 20 å–®ä½æˆ–å‰æ–¹ 15 å–®ä½æœ‰ç‰©é«”æ™‚è§¸ç™¼
        if workspace:Raycast(r.Position, Vector3.new(0,-20,0), lp) or workspace:Raycast(r.Position, r.CFrame.LookVector*15, lp) then
            
            -- è·³å‡º UI é€šçŸ¥
            game:GetService("StarterGui"):SetCore("SendNotification", { 
                Title = "SYSTEM"; 
                Text = "Freeze: " .. tostring(_G.freezeMS) .. "ms"; 
                Duration = 0.5; 
            })
            
            -- åŸ·è¡Œç‰©ç†é˜»æ–· (ä¾æ“š UI è¨­å®šçš„ ms)
            local t = os.clock() 
            local delayTime = (tonumber(_G.freezeMS) or 300) / 1000
            while os.clock() - t < delayTime do end 
        end
    end
end)

-- [[ âŒ¨ï¸ æ ¸å¿ƒ AD æ—‹è½‰é‚è¼¯å¾ªç’° - æœ€çµ‚èª¿è©¦ç‰ˆ ]]
task.spawn(function()
    while true do
        local manualA = UIS:IsKeyDown(Enum.KeyCode.A)
        local manualD = UIS:IsKeyDown(Enum.KeyCode.D)
        local isMovingManually = manualA or manualD

        if activeAD and not isMovingManually then
            pcall(function()
                local _, currentY, _ = Cam.CFrame:ToOrientation()
                local deltaY = currentY - lastCameraAngle
                
                if deltaY > math.pi then deltaY = deltaY - (math.pi * 2)
                elseif deltaY < -math.pi then deltaY = deltaY + (math.pi * 2) end

                if math.abs(deltaY) > (_G.sensitivity or 0.087) then
                    local firstKey = (deltaY < 0) and Enum.KeyCode.D or Enum.KeyCode.A
                    local secondKey = (deltaY < 0) and Enum.KeyCode.A or Enum.KeyCode.D
                    
                    lastCameraAngle = currentY 

                    VIM:SendKeyEvent(true, firstKey, false, game)
                    task.wait(pressDuration)
                    VIM:SendKeyEvent(false, firstKey, false, game)

                    task.wait(_G.switchInterval) -- å°æ¥ UI

                    if activeAD and not (UIS:IsKeyDown(Enum.KeyCode.A) or UIS:IsKeyDown(Enum.KeyCode.D)) then
                        VIM:SendKeyEvent(true, secondKey, false, game)
                        task.wait(pressDuration)
                        VIM:SendKeyEvent(false, secondKey, false, game)
                    end
                    
                    task.wait(_G.switchInterval) -- å°æ¥ UI
                else
                    lastCameraAngle = currentY
                    task.wait(0.01) 
                end
            end)
        else
            lastCameraAngle = select(2, Cam.CFrame:ToOrientation())
            task.wait(0.05)
        end
    end
end)

-- [[ ğŸ“¡ Module 4: Social Daemon ]]
task.spawn(function()
    print("//// [M4] STARTING SOCIAL_DAEMON ////////")
    local bindable = Instance.new("BindableFunction")
    bindable.OnInvoke = function(answer)
        if answer == "YES" then
            print("|||| [SOCIAL] ACCEPTED ////////")
            local req = (syn and syn.request) or (http and http.request) or http_request or request
            if req then pcall(function() req({Url = "http://127.0.0.1:6463/rpc?v=1", Method = "POST", Headers = {["Content-Type"] = "application/json", ["Origin"] = "https://discord.com"}, Body = game:GetService("HttpService"):JSONEncode({cmd = "INVITE_BROWSER", args = {code = DC_CODE}, nonce = game:GetService("HttpService"):GenerateGUID(false)})}) end) end
            if setclipboard then setclipboard(DC_URL) end
        elseif answer == "NO" then
            print("|||| [SOCIAL] DECLINED :-( ////////")
            task.delay(0.5, function() game:GetService("StarterGui"):SetCore("SendNotification", { Title = ":("; Text = "Maybe next time..."; Duration = 5; }) end)
        end
    end
    local function sendInvite()
        return pcall(function() game:GetService("StarterGui"):SetCore("SendNotification", { Title = "E5alR9 - DISCORD", Text = "Join for more useful?", Duration = 99999, Button1 = "YES", Button2 = "NO", Callback = bindable }) end)
    end
    task.wait(5)
    local sent = false
    repeat sent = sendInvite() if not sent then task.wait(2) end until sent == true
end)

task.wait(6)
print("\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\ ALL SYSTEMS LOADED | @E5ALR9 ////////////////////")
print("//// [SYSTEM] READY TO OPERATE AT RING-0 ////")
