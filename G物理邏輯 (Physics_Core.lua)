local p, UIS, RS = game.Players.LocalPlayer, game:GetService("UserInputService"), game:GetService("RunService")
local bhop, freeze = false, false

UIS.InputBegan:Connect(function(i, g) 
    if g then return end 
    if i.KeyCode == Enum.KeyCode.Space then bhop = true 
    elseif i.KeyCode.Name == _G.fKN then freeze = true print("\\\\ INPUT \\\\ [[ FREEZE_ENGAGED ]]") end 
end)
UIS.InputEnded:Connect(function(i) 
    if i.KeyCode == Enum.KeyCode.Space then bhop = false 
    elseif i.KeyCode.Name == _G.fKN then freeze = false end 
end)

RS.Heartbeat:Connect(function()
    local c = p.Character
    local r = c and c:FindFirstChild("HumanoidRootPart")
    local lp = RaycastParams.new()
    lp.FilterDescendantsInstances = {c}
    lp.FilterType = Enum.RaycastFilterType.Exclude

    if bhop and c and c:FindFirstChildOfClass("Humanoid") and c:FindFirstChildOfClass("Humanoid").FloorMaterial ~= Enum.Material.Air then c:FindFirstChildOfClass("Humanoid"):ChangeState(3) end
    if freeze and r then
        if workspace:Raycast(r.Position, Vector3.new(0,-20,0), lp) or workspace:Raycast(r.Position, r.CFrame.LookVector*15, lp) then
            local t = os.clock() 
            while os.clock() - t < (_G.freezeMS / 1000) do end 
        end
    end
end)
