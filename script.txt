-- [[ 1. Configurations & Variables ]]
_G.emoteSwaps = {{current = "APose", needed = "SnowmobileCruise"}}

local p = game.Players.LocalPlayer
local UIS, RS, VU, TS = game:GetService("UserInputService"), game:GetService("RunService"), game:GetService("VirtualUser"), game:GetService("TweenService")
local bhop, freeze, active = false, false, {}

-- [[ 2. Notification System ]]
local function notify(t, s)
    local sg = Instance.new("ScreenGui", p.PlayerGui)
    local f = Instance.new("Frame", sg)
    f.Size, f.Position, f.BackgroundColor3, f.BackgroundTransparency, f.BorderSizePixel = UDim2.new(0,220,0,60), UDim2.new(1,20,0.84,0), Color3.new(0,0,0), 0.5, 0
    
    local function lbl(txt, pos, fs)
        local l = Instance.new("TextLabel", f)
        l.Size, l.Position, l.Text, l.TextColor3, l.BackgroundTransparency, l.TextSize, l.Font = UDim2.new(1,-10,0.4,0), pos, txt, Color3.new(1,1,1), 1, fs, 3
    end
    lbl(t, UDim2.new(0,10,0.1,0), 16)
    lbl(s, UDim2.new(0,10,0.5,0), 13)

    local ti = TweenInfo.new(0.4)
    for i, v in ipairs(active) do TS:Create(v, ti, {Position = UDim2.new(1,-230, 0.84-(i*0.08), 0)}):Play() end
    table.insert(active, 1, f)
    TS:Create(f, ti, {Position = UDim2.new(1,-230,0.84,0)}):Play()
    
    task.delay(1.5, function()
        local out = TS:Create(f, ti, {Position = UDim2.new(1,20,f.Position.Y.Scale,0)})
        out:Play()
        out.Completed:Connect(function() table.remove(active, table.find(active, f)) sg:Destroy() end)
    end)
end

-- [[ 3. Loaders ]]
loadstring(game:HttpGet("https://api.luarmor.net/files/v3/loaders/36d5417f898691cb6c6d347b077e01e2.lua"))()

local items = game:GetService("ReplicatedStorage"):FindFirstChild("Items")
if items then
    local function dup(folder, old, new)
        local f = items:FindFirstChild(folder)
        local i = f and f:FindFirstChild(old)
        if i then i:Clone().Parent = f i.Name = new end
    end
    dup("Emotes", "RockinStride", "Stride")
    dup("Emotes", "Broom", "SnowmobileCruise")
    dup("Cosmetics", "ToxicInferno", "BorealisAurora")
end

-- [[ 4. Character Logic (Headless & External) ]]
local function setupChar(c)
    local h = c:WaitForChild("Head", 5)
    if h then 
        h.Transparency = 1 
        for _, v in pairs(h:GetChildren()) do if v:IsA("Decal") then v.Transparency = 1 end end 
    end
    task.spawn(pcall, function() 
        loadstring(game:HttpGet("https://rawscripts.net/raw/Universal-Script-Korblox-All-61127"))() 
    end)
end

-- [[ 5. Events & Loops ]]
p.Idled:Connect(function() VU:CaptureController() VU:ClickButton2(Vector2.zero) end)

UIS.InputBegan:Connect(function(i, g) 
    if g then return end 
    if i.KeyCode == Enum.KeyCode.Space then bhop = true 
    elseif i.KeyCode == Enum.KeyCode.PageDown then freeze = true end 
end)

UIS.InputEnded:Connect(function(i) 
    if i.KeyCode == Enum.KeyCode.Space then bhop = false 
    elseif i.KeyCode == Enum.KeyCode.PageDown then freeze = false end 
end)

RS.Heartbeat:Connect(function()
    local c = p.Character
    local m = c and c:FindFirstChildOfClass("Humanoid")
    local r = c and c:FindFirstChild("HumanoidRootPart")
    
    if bhop and m and m.FloorMaterial ~= Enum.Material.Air then m:ChangeState(3) end
    if freeze and r then
        local t = os.clock() while os.clock() - t < 0.3 do end
        notify("FREEZE", "300MS")
        task.wait(0.1)
    end
end)

p.CharacterAdded:Connect(setupChar)
if p.Character then setupChar(p.Character) end
