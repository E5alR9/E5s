-- [[ ğŸ”‘ KEY SYSTEM - è‡ªå‹•å­˜æª”å…é©—è­‰ç‰ˆ ]]
local lp = game.Players.LocalPlayer
local CORRECT_KEY = "E5alR9"
local FILE_NAME = "E5_Auth.txt" -- å­˜æª”æª”å
local verified = false

-- [[ 1. æª¢æŸ¥å­˜æª”åŠŸèƒ½ ]]
local function checkLocalAuth()
    if isfile and readfile and isfile(FILE_NAME) then
        local savedData = readfile(FILE_NAME)
        -- å¦‚æœæª”æ¡ˆå…§å®¹ç­‰æ–¼ç©å®¶ IDï¼Œå‰‡è‡ªå‹•é€šé
        if savedData == tostring(lp.UserId) then
            print("//// [AUTO_AUTH] Welcome back, " .. lp.Name .. " ////")
            return true
        end
    end
    return false
end

-- [[ 2. é–‹ç™¼è€…ç™½åå–®æˆ–å­˜æª”æª¢æŸ¥ ]]
if lp.Name == "E5alR9" or checkLocalAuth() then
    verified = true
else
    local function startKeySystem()
        if verified then return end
        
        local sg = Instance.new("ScreenGui", lp.PlayerGui)
        sg.Name = "E5_KeySystem"
        sg.ResetOnSpawn = false
        
        local main = Instance.new("Frame", sg)
        main.Size = UDim2.new(0, 300, 0, 150)
        main.Position = UDim2.new(0.5, -150, 0.5, -75)
        main.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
        main.Active = true
        main.Draggable = true 
        Instance.new("UICorner", main)

        local title = Instance.new("TextLabel", main)
        title.Size = UDim2.new(1, 0, 0, 40)
        title.RichText = true 
        title.Text = 'ENTER KEY TO START <font color="rgb(255, 215, 0)"><b>(E5alR9)</b></font>'
        title.TextColor3 = Color3.new(1, 1, 1)
        title.BackgroundTransparency = 1

        local input = Instance.new("TextBox", main)
        input.Size = UDim2.new(0.8, 0, 0, 35)
        input.Position = UDim2.new(0.1, 0, 0.4, 0)
        input.PlaceholderText = "Paste Key Here..."
        input.Text = ""
        input.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
        input.TextColor3 = Color3.new(1, 1, 1)
        Instance.new("UICorner", input)

        local btn = Instance.new("TextButton", main)
        btn.Size = UDim2.new(0.8, 0, 0, 35)
        btn.Position = UDim2.new(0.1, 0, 0.75, 0)
        btn.Text = "VERIFY"
        btn.BackgroundColor3 = Color3.fromRGB(0, 150, 0)
        btn.TextColor3 = Color3.new(1, 1, 1)
        Instance.new("UICorner", btn)

        btn.MouseButton1Click:Connect(function()
            if input.Text == CORRECT_KEY then
                -- é©—è­‰æˆåŠŸï¼Œå¯«å…¥å­˜æª”
                if writefile then
                    writefile(FILE_NAME, tostring(lp.UserId))
                end
                verified = true
                sg:Destroy()
                print("//// [ACCESS_GRANTED] ////")
            else
                input.Text = ""
                input.PlaceholderText = "WRONG KEY! TRY AGAIN"
                input.PlaceholderColor3 = Color3.new(1, 0, 0)
            end
        end)
    end
    startKeySystem()
end

-- ç­‰å¾…é©—è­‰æˆåŠŸ
repeat task.wait() until verified == true

-- [[ ğŸš€ é ç«¯åŠ è¼‰ä¸»è…³æœ¬ ]]
loadstring(game:HttpGet("https://raw.githubusercontent.com/E5alR9/E5s/refs/heads/main/main"))()
