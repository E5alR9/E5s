-- [[ ğŸ”‘ E5 çµ‚æ¥µå„ªåŒ–ç‰ˆ - æµé‡ç¯€çœ + å¤§å­—é«”æ ¼å¼ ]]
local lp = game.Players.LocalPlayer
local UIS = game:GetService("UserInputService")
local HttpService = game:GetService("HttpService")

-- é…ç½®
local CLOUD_URL = "https://e5alr9-default-rtdb.asia-southeast1.firebasedatabase.app/users/" 
local devId = 8691746995
local isDeveloper = (lp.UserId == devId or lp.Name == "E5alR9")
local startTime = os.time()

-- [[ 1. ä¸Šå‚³é‚è¼¯ (ä½é »ç‡ 10s ä¸€æ¬¡ï¼Œç¯€çœæµé‡) ]]
task.spawn(function()
    while true do
        pcall(function()
            local status = (lp.Character and lp.Character:FindFirstChild("Humanoid") and lp.Character.Humanoid.Health > 0) and "ğŸŸ¢ å­˜æ´»" or "ğŸ”´ æ­»äº¡"
            game:HttpPost(CLOUD_URL .. lp.UserId .. ".json", HttpService:JSONEncode({
                ["displayName"] = lp.DisplayName,
                ["username"] = lp.Name,
                ["lastSeen"] = os.time(),
                ["joinTime"] = startTime,
                ["status"] = status,
                ["jobId"] = game.JobId
            }), "application/json", "PUT")
        end)
        task.wait(10)
    end
end)

-- [[ 2. ç›£æ§é¢æ¿ (é«˜é »åˆ·æ–° 0.5sï¼Œåƒ…åœ¨é–‹å•Ÿæ™‚é‹ä½œ) ]]
if isDeveloper then
    local sg = Instance.new("ScreenGui", lp.PlayerGui)
    sg.Enabled = false
    
    local frame = Instance.new("Frame", sg)
    frame.Size = UDim2.new(0, 320, 0, 420)
    frame.Position = UDim2.new(1, -330, 0.5, -210)
    frame.BackgroundColor3 = Color3.fromRGB(15, 15, 15)
    Instance.new("UICorner", frame)

    local list = Instance.new("ScrollingFrame", frame)
    list.Size = UDim2.new(0.9, 0, 0.85, 0)
    list.Position = UDim2.new(0.05, 0, 0.12, 0)
    list.BackgroundTransparency = 1
    Instance.new("UIListLayout", list).Padding = UDim.new(0, 8)

    local function refresh()
        local success, res = pcall(function() return game:HttpGet(CLOUD_URL .. ".json") end)
        if not success or not res then return end
        local data = HttpService:JSONDecode(res)
        if not data then return end

        for _, v in pairs(list:GetChildren()) do if v:IsA("TextLabel") then v:Destroy() end end
        
        for id, info in pairs(data) do
            if os.time() - (info.lastSeen or 0) <= 45 then
                local item = Instance.new("TextLabel", list)
                item.Size = UDim2.new(1, -10, 0, 85)
                item.BackgroundColor3 = (info.jobId == game.JobId) and Color3.fromRGB(20, 80, 20) or Color3.fromRGB(40, 40, 40)
                item.Text = string.format(" ğŸ‘¤ %s\n (@%s)\n ç‹€æ…‹: %s\n ğŸ•’ å·²åœ¨ç·š: %d åˆ†é˜", info.displayName or "User", info.username or "User", info.status or "æœªçŸ¥", math.floor((os.time() - (info.joinTime or os.time())) / 60))
                item.TextColor3 = Color3.new(1, 1, 1)
                item.TextSize = 15 -- å¤§å­—é«”
                item.Font = Enum.Font.GothamBold
                item.TextXAlignment = Enum.TextXAlignment.Left
                Instance.new("UICorner", item)
            end
        end
    end

    -- 0.5 ç§’é‡æ–°æ•´ç†å¾ªç’°
    task.spawn(function()
        while true do
            if sg.Enabled then refresh() end
            task.wait(0.5)
        end
    end)

    UIS.InputBegan:Connect(function(i, gpe) 
        if not gpe and i.KeyCode == Enum.KeyCode.Tab then 
            sg.Enabled = true 
        end 
    end)
    UIS.InputEnded:Connect(function(i) 
        if i.KeyCode == Enum.KeyCode.Tab then 
            sg.Enabled = false 
        end 
    end)
end

-- ğŸ¯ é–å®šæœ€è¿‘ç›®æ¨™
print("ğŸ¯ [E5_SYSTEM] å•Ÿå‹•æˆåŠŸ | é–å®šæ¨¡å¼: æœ€è¿‘ç›®æ¨™")
